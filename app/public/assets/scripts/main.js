function ajaxCall(e){var t="all"===e?"request-data":'request-data?type="'+e+'"';return document.getElementById("loadingCanvas").classList.remove("hidden"),startLoading(),new Promise(function(e,n){var a=new XMLHttpRequest;a.open("POST",t),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(),a.onerror=n,a.onload=function(){e(this.responseText)}})}function createSortableTable(){var e=document.querySelectorAll("th");document.querySelectorAll("th").forEach(function(t,n){e[n].addEventListener("click",function(){sortTable(n,this.parentNode.parentNode.parentNode)})})}function sortTable(e,t){var n,a,o,r,c,l,s,d=0;for(a=!0,s="asc";a;){for(a=!1,n=t.getElementsByTagName("tr"),o=1;o<n.length-1;o++)if(l=!1,r=n[o].getElementsByTagName("td")[e],c=n[o+1].getElementsByTagName("td")[e],"asc"===s){if(r.innerHTML.toLowerCase()>c.innerHTML.toLowerCase()){l=!0;break}}else if("desc"===s&&r.innerHTML.toLowerCase()<c.innerHTML.toLowerCase()){l=!0;break}l?(n[o].parentNode.insertBefore(n[o+1],n[o]),a=!0,d++):0===d&&"asc"===s&&(s="desc",a=!0)}}document.querySelectorAll("button").forEach(function(e){var t=e.dataset.call;e.addEventListener("click",function(){ajaxCall(t).then(function(e){setTimeout(function(){document.getElementById("loadingCanvas").classList.add("hidden"),stopLoading(),document.getElementById("tableWrapper").innerHTML=e,createSortableTable()},250)}).catch(function(){})})});